# Проект: Система обработки заказов с использованием Apache Kafka

## Обзор проекта
Данный проект реализует систему обработки заказов для интернет-магазина, основанную на микросервисной архитектуре и использующую Apache Kafka для асинхронной связи между сервисами. Система обеспечивает бесшовную обработку заказов, оплат, отгрузок и уведомлений пользователей.

## Архитектура системы
Проект включает следующие микросервисы:

1. **Сервис заказов (Orders)**:
    - Получает и обрабатывает новые заказы от пользователей.
    - Отправляет информацию о заказах в тему Kafka `new_orders`.
    - Поддерживает обновление статусов заказов.

2. **Сервис оплаты (Payment)**:
    - Подписывается на тему `new_orders` для получения новых заказов.
    - Обрабатывает оплату и обновляет статус заказа.
    - Отправляет подтверждение оплаты в тему Kafka `payed_orders`.

3. **Сервис отгрузки (Shipping)**:
    - Подписывается на тему `payed_orders`.
    - Осуществляет упаковку и отправку заказов.
    - Публикует информацию об успешной отгрузке в тему Kafka `sent_orders`.

4. **Сервис уведомлений (Notifications)**:
    - Подписывается на тему `sent_orders`.
    - Отправляет пользователям уведомления об успешной доставке их заказов.

## Основные характеристики
- **Микросервисная архитектура**: Независимые сервисы, взаимодействующие через Kafka.
- **Асинхронная обработка сообщений**: Надежная и масштабируемая коммуникация с использованием Apache Kafka.
- **Обработка ошибок**: Логирование ошибок и механизм повторной обработки сообщений.
- **Масштабируемость**: Оптимизация для обработки большого объема заказов.
- **Логирование**: Подробное логирование для мониторинга и отладки.

## Технический стек
- **Язык программирования**: Java
- **Фреймворки**: Spring Boot, Spring Kafka
- **Брокер сообщений**: Apache Kafka
- **База данных**: H2
- **Инструменты**: Maven, Docker

## Детали сервисов

### Сервис заказов
- Предоставляет эндпоинты для создания и управления заказами.
- Публикует сообщения в тему `new_orders`.

### Сервис оплаты
- Подписывается на тему `new_orders` для получения событий о новых заказах.
- Обрабатывает оплату и обновляет статус заказа на `Оплачен`.
- Публикует результаты оплаты в тему `payed_orders`.

### Сервис отгрузки
- Подписывается на тему `payed_orders` для получения информации об оплаченных заказах.
- Управляет упаковкой и процессом отправки.
- Отправляет подтверждение отгрузки в тему `sent_orders`.

### Сервис уведомлений
- Следит за темой `sent_orders` для отслеживания отгруженных заказов.
- Уведомляет пользователей о доставке заказов.

## Как запустить проект
1. **Клонируйте репозиторий**:

2. **Перейдите в каталог проекта**:

3. **Запустите Kafka и Zookeeper** (с использованием Docker):

4. **Соберите и запустите сервисы**:


## Обработка ошибок и механизм повторной отправки
- Каждый сервис включает обработку ошибок для логирования проблем и повторной обработки неудачных операций.
- Настройки потребителей Kafka позволяют управлять повторной доставкой сообщений.

## Возможные улучшения
- Добавление аутентификации и авторизации.
- Внедрение более детального мониторинга с использованием Prometheus и Grafana.
- Реализация панели управления для отслеживания заказов.